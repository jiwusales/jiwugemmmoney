<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å‰ç‰©éŒ¢éŒ¢è¨ˆç®—æ©Ÿ</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 20px;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .calculator {
      max-width: 400px;
      width: 100%;
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    .mode-switch {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }
    .mode-switch button {
      font-size: 24px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      background: #ddd; /* æ·ºç°åœ“åœˆ */
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }
    .mode-switch button.active {
      background: #555; /* æ·±ç°åœ“åœˆ */
      color: #fff;
    }
    label { display: block; margin-top: 10px; }
    input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 16px;
    }
    .result {
      margin-top: 20px;
      padding: 15px;
      background: #f1f1f1;
      border-radius: 8px;
    }
    .result p { margin: 6px 0; }
  </style>
</head>
<body>
  <div class="calculator">
    <h1>å‰ç‰©éŒ¢éŒ¢è¨ˆç®—æ©Ÿ</h1>

    <div class="mode-switch">
      <button id="btnJPY" class="active" onclick="switchCurrency('JPY')">ğŸ‡¯ğŸ‡µ</button>
      <button id="btnCNY" onclick="switchCurrency('CNY')">ğŸ‡¨ğŸ‡³</button>
    </div>

    <!-- æ—¥å¹£å€å¡Š -->
    <div id="jpySection">
      <label>åŸåƒ¹ï¼ˆÂ¥ï¼‰ï¼š</label>
      <input type="text" id="yen" oninput="calculate()">

      <label>ç¾åœ¨åŒ¯ç‡ï¼š</label>
      <input type="text" id="currentRate" oninput="calculate()">

      <label>ä»£è³¼åŒ¯ç‡ï¼š</label>
      <input type="text" id="agencyRate" oninput="calculate()">

      <label>é‹è²»ï¼ˆNTD$ï¼‰ï¼š</label>
      <input type="text" id="shippingFee" oninput="calculate()">
    </div>

    <!-- äººæ°‘å¹£å€å¡Š -->
    <div id="cnySection" style="display:none;">
      <label>åŸåƒ¹ï¼ˆRMBÂ¥ï¼‰ï¼š</label>
      <input type="text" id="rmbPrice" oninput="calculate()">

      <label>ç¾åœ¨åŒ¯ç‡ï¼š</label>
      <input type="text" id="exchangeRate" oninput="calculate()">

      <label>æ‰‹çºŒè²»ï¼ˆ%ï¼‰ï¼š</label>
      <input type="text" id="fee" oninput="calculate()">

      <label>åˆ©æ½¤ï¼ˆNTD$ï¼‰ï¼š</label>
      <input type="text" id="profit" oninput="calculate()">

      <label>é‹è²»ï¼ˆNTD$ï¼‰ï¼š</label>
      <input type="text" id="shipping" oninput="calculate()">
    </div>

    <div class="result">
      <p id="cost">æˆæœ¬ï¼š0</p>
      <p id="price">å”®åƒ¹ï¼š0</p>
      <p id="profitResult">åˆ©æ½¤ï¼š0</p>
    </div>
  </div>

  <script>
    function switchCurrency(type) {
      document.getElementById("btnJPY").classList.remove("active");
      document.getElementById("btnCNY").classList.remove("active");
      document.getElementById("btn" + type).classList.add("active");

      document.getElementById("jpySection").style.display = (type === "JPY") ? "block" : "none";
      document.getElementById("cnySection").style.display = (type === "CNY") ? "block" : "none";

      calculate();
    }

    function calculate() {
      let cost = 0, price = 0, profit = 0;

      if (document.getElementById("jpySection").style.display === "block") {
        const yen = parseFloat(document.getElementById("yen").value) || 0;
        const currentRate = parseFloat(document.getElementById("currentRate").value) || 0;
        const agencyRate = parseFloat(document.getElementById("agencyRate").value) || 0;
        const shippingFee = parseFloat(document.getElementById("shippingFee").value) || 0;

        // æ—¥å¹£å…¬å¼
        cost = Math.ceil(yen * currentRate);
        price = Math.ceil(yen * agencyRate + shippingFee);
        profit = Math.ceil(price - cost - shippingFee);

      } else {
        const rmb = parseFloat(document.getElementById("rmbPrice").value) || 0;
        const rate = parseFloat(document.getElementById("exchangeRate").value) || 0;
        const fee = (parseFloat(document.getElementById("fee").value) || 0)/100;
        const profitInput = parseFloat(document.getElementById("profit").value) || 0;
        const shipping = parseFloat(document.getElementById("shipping").value) || 0;

        // äººæ°‘å¹£å…¬å¼
        cost = rmb * (1 + fee) * rate;
        price = cost + shipping + profitInput;
        profit = profitInput;
      }

      document.getElementById("cost").innerText = "æˆæœ¬ï¼š" + cost.toFixed(2);
      document.getElementById("price").innerText = "å”®åƒ¹ï¼š" + price.toFixed(2);
      document.getElementById("profitResult").innerText = "åˆ©æ½¤ï¼š" + profit.toFixed(2);
    }
  </script>
</body>
</html>