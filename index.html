<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#fbcc7e">

  <title>å‰ç‰©éŒ¢éŒ¢è¨ˆç®—æ©Ÿ</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 20px;
    }

    h1 {
      margin: 0 0 20px 0;
      font-size: 20px;
      text-align: center;
      color: #333;
    }

    .calculator {
      max-width: 400px;
      width: 90%;
      background: #fff;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      min-height: 520px;
      display: flex;
      flex-direction: column;
    }

    .mode-switch {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

   .mode-switch button {
  font-size: 24px;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: 5px solid #ddd; /* é è¨­é‚Šæ¡† */
  cursor: pointer;
  background: #f9f9f9;   /* èƒŒæ™¯ä¿æŒç™½è‰² */
  color: #333;            /* æ–‡å­—é¡è‰² */
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}

.mode-switch button.active {
  border: 2px solid #fbcc7e; /* é¸ä¸­æ™‚é‚Šæ¡†é¡è‰² */
  background: #f9f9f9;       /* èƒŒæ™¯ä¸è®Š */
  color: #fbcc7e;            /* æ–‡å­—æ”¹æˆé‚Šæ¡†è‰²ï¼Œä¹Ÿå¯ä»¥ä¿ç•™ç™½è‰² */
}
    
    label { display: block; margin-top: 10px; }
    input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 16px;
    }

    .result {
      margin-top: 20px;
      padding: 15px;
      background: #f1f1f1;
      border-radius: 8px;
    }

    .result p { margin: 6px 0; }

    .section { display: none; }
    .section.active { display: block; }
  </style>
</head>
<body>

<h1>å‰ç‰©éŒ¢éŒ¢è¨ˆç®—æ©Ÿ</h1>

<div class="calculator">
  <div class="mode-switch">
    <button id="btnJPY" class="active" onclick="switchCurrency('JPY')">ğŸ‡¯ğŸ‡µ</button>
    <button id="btnCNY" onclick="switchCurrency('CNY')">ğŸ‡¨ğŸ‡³</button>
    <button id="btnKRW" onclick="switchCurrency('KRW')">ğŸ‡°ğŸ‡·</button>
  </div>

  <!-- æ—¥æœ¬ -->
  <div id="jpySection" class="section active">
    <label>åŸåƒ¹ï¼ˆÂ¥ï¼‰ï¼š</label>
    <input type="text" id="yen" oninput="calculate()">
    <label>ç¾åœ¨åŒ¯ç‡ï¼š</label>
    <input type="text" id="currentRate" oninput="calculate()">
    <label>ä»£è³¼åŒ¯ç‡ï¼š</label>
    <input type="text" id="agencyRate" oninput="calculate()">
    <label>é‹è²»ï¼ˆNTD$ï¼‰ï¼š</label>
    <input type="text" id="shippingFee" oninput="calculate()">
  </div>

  <!-- ä¸­åœ‹ -->
  <div id="cnySection" class="section">
    <label>åŸåƒ¹ï¼ˆRMBÂ¥ï¼‰ï¼š</label>
    <input type="text" id="rmbPrice" oninput="calculate()">
    <label>åŒ¯ç‡ï¼š</label>
    <input type="text" id="exchangeRate" oninput="calculate()">
    <label>æ‰‹çºŒè²»ï¼ˆ%ï¼‰ï¼š</label>
    <input type="text" id="fee" oninput="calculate()">
    <label>åˆ©æ½¤ï¼ˆNTD$ï¼‰ï¼š</label>
    <input type="text" id="cnyProfit" oninput="calculate()">
    <label>é‹è²»ï¼ˆNTD$ï¼‰ï¼š</label>
    <input type="text" id="shipping" oninput="calculate()">
  </div>

  <!-- éŸ“åœ‹ -->
  <div id="krwSection" class="section">
    <label>åŸåƒ¹ï¼ˆâ‚©ï¼‰ï¼š</label>
    <input type="text" id="krwPrice" oninput="calculate()">
    <label>åŒ¯ç‡ï¼š</label>
    <input type="text" id="krwCurrentRate" oninput="calculate()">
    <label>æ‰‹çºŒè²»ï¼ˆ%ï¼‰ï¼š</label>
    <input type="text" id="krwFee" oninput="calculate()">
    <label>åˆ©æ½¤ï¼ˆNTD$ï¼‰ï¼š</label>
    <input type="text" id="krwProfit" oninput="calculate()">
    <label>é‹è²»ï¼ˆNTD$ï¼‰ï¼š</label>
    <input type="text" id="krwShippingFee" oninput="calculate()">
  </div>

  <div class="result">
    <p id="cost">æˆæœ¬ï¼š0</p>
    <p id="price">å”®åƒ¹ï¼š0</p>
    <p id="profitResult">åˆ©æ½¤ï¼š0</p>
  </div>
</div>

<script>
function switchCurrency(type){
  document.getElementById("btnJPY").classList.toggle("active", type==="JPY");
  document.getElementById("btnCNY").classList.toggle("active", type==="CNY");
  document.getElementById("btnKRW").classList.toggle("active", type==="KRW");

  document.getElementById("jpySection").classList.toggle("active", type==="JPY");
  document.getElementById("cnySection").classList.toggle("active", type==="CNY");
  document.getElementById("krwSection").classList.toggle("active", type==="KRW");

  calculate();
}

function calculate(){
  let cost = 0, price = 0, profit = 0;

  const jpyActive = document.getElementById("jpySection").classList.contains("active");
  const cnyActive = document.getElementById("cnySection").classList.contains("active");
  const krwActive = document.getElementById("krwSection").classList.contains("active");

  if(jpyActive){
    const yen = parseFloat(document.getElementById("yen").value) || 0;
    const currentRate = parseFloat(document.getElementById("currentRate").value) || 0;
    const agencyRate = parseFloat(document.getElementById("agencyRate").value) || 0;
    const shippingFee = parseFloat(document.getElementById("shippingFee").value) || 0;

    // æ—¥æœ¬å…¬å¼
    cost = yen * currentRate;
    price = yen * agencyRate;
    profit = price - cost - shippingFee;

  } else if(cnyActive){
    const rmb = parseFloat(document.getElementById("rmbPrice").value) || 0;
    const rate = parseFloat(document.getElementById("exchangeRate").value) || 0;
    const fee = (parseFloat(document.getElementById("fee").value) || 0) / 100;
    const cnyProfit = parseFloat(document.getElementById("cnyProfit").value) || 0;
    const shipping = parseFloat(document.getElementById("shipping").value) || 0;

    // ä¸­åœ‹å…¬å¼
    cost = rmb * (1 + fee) * rate;
    price = cost + cnyProfit + shipping;
    profit = price - cost - shipping;

  } else if(krwActive){
    const krwPrice = parseFloat(document.getElementById("krwPrice").value) || 0;
    const krwCurrentRate = parseFloat(document.getElementById("krwCurrentRate").value) || 0;
    const krwFee = (parseFloat(document.getElementById("krwFee").value) || 0) / 100;
    const krwProfit = parseFloat(document.getElementById("krwProfit").value) || 0;
    const krwShippingFee = parseFloat(document.getElementById("krwShippingFee").value) || 0;

    // éŸ“åœ‹å…¬å¼
    if (krwCurrentRate > 0) {
      cost = (krwPrice * (1 + krwFee)) / krwCurrentRate;
      price = cost + krwProfit + krwShippingFee;
      profit = price - cost - krwShippingFee;
    }
  }

document.getElementById("cost").innerText = "æˆæœ¬ï¼š" + (isFinite(cost) ? Math.ceil(cost) : 0);
document.getElementById("price").innerText = "å”®åƒ¹ï¼š" + (isFinite(price) ? Math.ceil(price) : 0);

// åªæœ‰æ—¥æœ¬é¡¯ç¤ºåˆ©æ½¤ï¼Œå…¶å®ƒæ¸…ç©º
document.getElementById("profitResult").innerText = jpyActive
  ? "åˆ©æ½¤ï¼š" + (isFinite(profit) ? Math.ceil(profit) : 0)
  : "";
}
</script>
</body>
</html>
